{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Notification","message","successStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","messageStyle","type","style","content","Filter","filter","handleFilterChange","value","onChange","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Persons","personsToShow","deletePerson","map","person","name","Person","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","personService","initialPersons","showMessage","setTimeout","RegExp","test","event","target","preventDefault","toLowerCase","includes","window","confirm","find","changedPerson","returnedPerson","catch","error","p","concat","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.73bb9ea3.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = id => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (newObject) => {\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, remove, update }\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\n\nconst Notification = ({message}) => {\n  if(message === null) {\n    return null\n  }\n  \n  const successStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  const errorStyle = {...successStyle, color: 'red'}\n  \n  const messageStyle = message.type === 'success' ? successStyle : errorStyle\n\n  return (\n    <div style={messageStyle}>\n      {message.content}\n    </div>\n  )\n}\n\nconst Filter = ({filter, handleFilterChange}) => (\n  <div>\n    filter shown with <input value={filter} onChange={handleFilterChange} />\n  </div>\n)\n\nconst PersonForm = (props) => {\n  return(\n    <form onSubmit={props.addPerson}>\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange} />\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst Persons =({personsToShow, deletePerson}) => (\n  <div>\n    {personsToShow.map(person => <Person key={person.name} person={person} deletePerson={deletePerson}/>)}\n  </div>  \n)\n\nconst Person = ({person, deletePerson}) => {\n  return (\n    <div>\n      {person.name} {person.number} <button onClick={() => deletePerson(person.id)}>delete</button>\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const showMessage = (message) => {\n    setMessage(message)\n    setTimeout(() => {\n      setMessage(null)\n    }, 4000)  \n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const names = persons.map(person => person.name.toLowerCase())\n    if (names.includes(newName.toLowerCase())) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.find(person => person.name === newName)\n        const changedPerson = {...person, number: newNumber}\n  \n        personService\n          .update(changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n            showMessage({content: `Changed the phone number of ${newName}`, type: 'success'})\n          })\n          .catch(error => {\n            showMessage({content: `Information of ${person.name} has already been removed from server`, type: 'error'})\n            setPersons(persons.filter(p => p.id !== person.id))\n          })   \n      }\n      \n    } else {  \n      const personObject = {name: newName, number: newNumber}\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          showMessage({content: `Added ${newName}`, type: 'success'})\n        })\n        .catch(error => {\n          showMessage({content: error.response.data.error, type: 'error'})\n      })\n      \n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = (id) => {\n    const person = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .remove(id)\n        .catch(error => {\n          alert(\n            `${person.name} was already deleted from server`\n          )\n          setPersons(persons.filter(person => person.id !== id))\n        })\n\n      setPersons(persons.filter(person => person.id !== id))\n      showMessage({content: `Deleted ${person.name}`, type: 'success'})\n    }\n  } \n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  /*const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()) || person.number.includes(filter)) */\n  /*const personsToShow = persons.filter(person => new RegExp(filter, 'i').test(person.name) || person.number.includes(filter))*/\n  const personsToShow = persons.filter(person => new RegExp(filter, 'i').test(`${person.name} ${person.number}`))\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}  />\n      <h3>Numbers</h3>\n      <Persons personsToShow={personsToShow} deletePerson={deletePerson} />  \n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}